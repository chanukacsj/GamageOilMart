<?xml version="1.0" encoding="UTF-8"?>

<?import com.jfoenix.controls.JFXButton?>
<?import com.jfoenix.controls.JFXComboBox?>
<?import com.jfoenix.controls.JFXTextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="650.0" prefWidth="1000.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="lk.ijse.AutoCareCenter.controller.LoanPaymentController">

    <children>
        <!-- ScrollPane added -->
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" layoutX="10" layoutY="10" pannable="true" prefHeight="650.0" prefWidth="980.0" vbarPolicy="AS_NEEDED">

            <content>
                <VBox prefWidth="860" spacing="15">
                    <padding>
                        <Insets bottom="10" left="10" right="10" top="10" />
                    </padding>

                    <!-- Order & Loan IDs -->
                    <HBox spacing="20">
                        <Label fx:id="lblOrderId" style="-fx-font-weight:bold;" text="Order ID" />
                        <Label fx:id="lblLoanId" style="-fx-font-weight:bold;" text="Loan ID" />
                    </HBox>

                    <!-- Customer Info -->
                    <TitledPane expanded="true" text="Customer Information">
                        <content>
                            <GridPane hgap="20" vgap="15">
                                <padding>
                                    <Insets bottom="10" left="10" right="10" top="10" />
                                </padding>
                                <Label text="Customer Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <JFXTextField fx:id="txtCustomerName" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                <Label text="Phone:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <JFXTextField fx:id="txtPhone" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                        <columnConstraints>
                           <ColumnConstraints />
                           <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                           <RowConstraints />
                           <RowConstraints />
                        </rowConstraints>
                            </GridPane>
                        </content>
                    </TitledPane>

                    <!-- Material / Item Info -->
                    <TitledPane expanded="true" text="Material / Item Details">
                        <content>
                            <GridPane hgap="20" vgap="15">
                                <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>

                                <Label text="Material Code:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <JFXComboBox fx:id="cmbMaterialCode" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                <Label text="Description:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <Label fx:id="lblDescription" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                <Label text="Qty:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                <JFXTextField fx:id="txtQty" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                <Label text="Unit Price:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                                <Label fx:id="lblUnitPrice" GridPane.columnIndex="1" GridPane.rowIndex="3" />

                                <Label text="Service Charge:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                                <JFXTextField fx:id="txtServiceCharge" text="0" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                        <columnConstraints>
                           <ColumnConstraints />
                           <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                           <RowConstraints />
                           <RowConstraints />
                           <RowConstraints />
                           <RowConstraints />
                           <RowConstraints />
                        </rowConstraints>
                            </GridPane>
                        </content>
                    </TitledPane>

                    <!-- Payment Summary -->
                    <TitledPane expanded="true" text="Payment Summary">
                        <content>
                            <GridPane hgap="20" vgap="15">
                                <padding><Insets bottom="10" left="10" right="10" top="10" /></padding>

                                <Label text="Total Amount:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                <Label fx:id="lblTotal" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                <Label text="Down Payment:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                <JFXTextField fx:id="txtDownPayment" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                <Label text="Balance:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                <Label fx:id="lblBalance" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                        <columnConstraints>
                           <ColumnConstraints />
                           <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                           <RowConstraints />
                           <RowConstraints />
                           <RowConstraints />
                        </rowConstraints>
                            </GridPane>
                        </content>
                    </TitledPane>

                    <!-- Buttons -->
                    <HBox spacing="20">
                        <JFXButton fx:id="btnSaveLoan" onAction="#btnSaveLoanOnAction" style="-fx-background-color:#1e88e5; -fx-text-fill:white;" text="Save Loan" />
                        <JFXButton fx:id="btnClear" style="-fx-background-color:#e53935; -fx-text-fill:white;" text="Clear" />
                    </HBox>

                    <!-- Loan Payment -->
                    <TitledPane expanded="true" text="Loan Payment">
                        <content>
                            <HBox spacing="20">
                                <Label text="Pay Amount:" />
                                <JFXTextField fx:id="txtPayAmount" />
                                <JFXButton fx:id="btnPay" onAction="#openPaymentWindow" style="-fx-background-color:#43a047; -fx-text-fill:white;" text="Pay" />
                            </HBox>
                        </content>
                    </TitledPane>

                    <!-- Orders Table -->
                    <TableView fx:id="tblOrderCart" prefHeight="200">
                        <columns>
                            <TableColumn fx:id="colItemCode" text="Code" />
                            <TableColumn fx:id="colDescription" text="Description" />
                            <TableColumn fx:id="colQty" text="Qty" />
                            <TableColumn fx:id="colUnitPrice" text="Unit Price" />
                            <TableColumn fx:id="colCharge" text="Charge" />
                            <TableColumn fx:id="colTotal" text="Total" />
                            <TableColumn fx:id="colAction" text="Action" />
                        </columns>
                    </TableView>

                    <!-- All Loans -->
                    <TitledPane expanded="true" text="All Loans">
                        <content>
                            <TableView fx:id="tblLoans" prefHeight="220">
                                <columns>
                                    <TableColumn fx:id="colLoanId" text="Loan ID" />
                                    <TableColumn fx:id="colOrderId" text="Order ID" />
                                    <TableColumn fx:id="colCustName" text="Customer" />
                                    <TableColumn fx:id="colPhone" text="Phone" />
                                    <TableColumn fx:id="colTotalAmount" text="Total" />
                                    <TableColumn fx:id="colPaidAmount" text="Paid" />
                                    <TableColumn fx:id="colRemainingAmount" text="Remaining" />
                                    <TableColumn fx:id="colNextDue" text="Next Due" />
                                    <TableColumn fx:id="colStatus" text="Status" />
                                    <TableColumn fx:id="colActions" text="Action" />
                                </columns>
                            </TableView>
                        </content>
                    </TitledPane>

                </VBox>
            </content>
        </ScrollPane>
    </children>
</AnchorPane>
